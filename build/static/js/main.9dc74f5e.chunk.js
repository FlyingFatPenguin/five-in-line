(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{23:function(t,e,n){},24:function(t,e,n){},26:function(t,e,n){},30:function(t,e,n){},31:function(t,e,n){"use strict";n.r(e);var r=n(1),c=n.n(r),a=n(13),i=n.n(a),u=(n(23),n(24),n(12)),o=n.n(u),f=n(7),s=n(14),l=n(3),v=n(18);n(26);var j=n(0),b=["\ud83d\udc12","\ud83d\udc36","\ud83e\udd84","\ud83d\udc18","\ud83d\udc28","\ud83d\udc07","\ud83e\udd98","\ud83d\udc3c","\ud83d\udc26"],h=function(t){var e=t.type,n=t.active;if(!e)return Object(j.jsx)(j.Fragment,{});var r=b[e-1];return Object(j.jsx)("span",{className:n?"active":"",children:r})},d=n(2),O=n.n(d),y=(n(30),{}),p=function(t){var e=t.sizeX,n=t.sizeY,r=t.children,c=t.onClick;return Object(j.jsx)("div",{className:"matrix",style:y,children:Object(d.range)(n).map((function(t){return Object(j.jsx)("div",{className:"matrix-row",children:Object(d.range)(e).map((function(e){return Object(j.jsx)("div",{className:"matrix-block",onClick:function(){return null===c||void 0===c?void 0:c({x:e,y:t})},children:"function"===typeof r?Object(j.jsx)(r,{x:e,y:t}):r},e)}))},t)}))})},g=function(t){var e=t.data,n=t.onClick,r=t.activePos;return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(p,{sizeX:9,sizeY:9,onClick:n,children:function(t){var n,c,a,i=t.x,u=t.y,o=null===(n=e[u])||void 0===n?void 0:n[i],f=!!r&&(a=r,(c=t).x===a.x&&c.y===a.y);return Object(j.jsx)(h,{type:o,active:f})}})})},x=n(15),m=n(16),k=n(17),C=n(4),E=function(t){var e={};return function(n){return n in e?e[n]:e[n]=t(n)}},w=function(t,e){var n=E((function(r){return 0===r?t:(c=[].concat(Object(C.a)(n(r-1).map(e).reduce((function(t,e){return[].concat(Object(C.a)(t),Object(C.a)(e))}),[])),Object(C.a)(n(r-1))),O.a.uniqWith(c,O.a.isEqual));var c}));return n};function M(t){return Math.floor(Math.random()*t)}function F(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t.length;if(!(n<e)){for(var r=[],c=Object(C.a)(t),a=0;a<e;a++){var i=M(c.length),u=c.splice(i,1);r.push.apply(r,Object(C.a)(u))}return r}}function P(t){var e=[];for(var n in t){var r=t[n];for(var c in r){0===r[c]&&e.push({x:+c,y:+n})}}return e}function I(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=P(t);return F(n,e)}var S=function(){var t=Object(d.range)(9).map((function(t){return Object(d.range)(9).map((function(e){return{x:t,y:e}}))})),e=Object(d.range)(9).map((function(t){return Object(d.range)(9).map((function(e){return{x:e,y:t}}))})),n=Object(d.range)(9).map((function(t){return Object(d.range)(9).map((function(e){return{x:e,y:t+e-4}})).filter((function(t){var e=t.y;return e>=0&&e<9}))})),r=Object(d.range)(9).map((function(t){return Object(d.range)(9).map((function(e){return{x:e,y:t-e+4}})).filter((function(t){var e=t.y;return e>=0&&e<9}))}));return console.log(r),[].concat(Object(C.a)(t),Object(C.a)(e),Object(C.a)(n),Object(C.a)(r))}(),B=function(){function t(){var e=this;Object(m.a)(this,t),this.data=void 0,this.nearBy=function(t){var e=t.x,n=t.y;return[{x:e+1,y:n},{x:e-1,y:n},{x:e,y:n+1},{x:e,y:n-1}]},this.nearByCanGo=function(t){return e.nearBy(t).filter((function(t){return 0===e.get(t)}))},this.data=Object(d.range)(9).map((function(){return Object(d.range)(9).fill(0)}))}return Object(k.a)(t,[{key:"get",value:function(t){var e=t.x,n=t.y;return(this.data[n]||[])[e]}},{key:"set",value:function(t,e){var n=t.x,r=t.y;this.data[r][n]=e}},{key:"remove",value:function(t){this.set(t,0)}},{key:"clone",value:function(){return Object(d.cloneDeep)(this.data)}},{key:"randomPickEmpty",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return I(this.data,t)}},{key:"add",value:function(t,e){return 0===this.get(t)&&(this.set(t,e),!0)}},{key:"show",value:function(){return this.data.map((function(t){return t.join(",")})).join("\n")}},{key:"forceMove",value:function(t,e){var n=this.get(t);this.set(t,0),this.set(e,n)}},{key:"move",value:function(t,e){this.forceMove(t,e)}},{key:"canMove",value:function(t,e){return this.get(t)&&!this.get(e)&&this.findWay(t,e)}},{key:"findWay",value:function(t,e){var n=this;return function(t,e,n){for(var r=w([t],n),c=1;;){if(r(c).length===r(c-1).length)return;if(r(c).some((function(t){return Object(d.isEqual)(t,e)})))break;c++}var a=E((function(t){if(t===c)return e;var i=a(t+1);return r(t).reverse().find((function(t){return n(t).some((function(t){return Object(d.isEqual)(t,i)}))}))}));return Object(d.range)(c+1).map(a)}(t,e,(function(t){return[t].concat(Object(C.a)(n.nearByCanGo(t)))}))}},{key:"getFiveInLine",value:function(t){if(t.length<5)return[];var e,n=Object(x.a)(t),r=n[0],c=n.slice(1),a=[r],i=Object(f.a)(c);try{for(i.s();!(e=i.n()).done;){var u=e.value,o=a[a.length-1];if(this.get(o)!==this.get(u)){if(a.length>=5)return a;a.length=0}a.push(u)}}catch(s){i.e(s)}finally{i.f()}return a.length>=5?a:[]}},{key:"clearInLine",value:function(){var t=this,e=O()(S).flatMap((function(e){return t.getFiveInLine(e)})).uniq().value().filter((function(e){return t.get(e)}));return e.forEach((function(e){return t.remove(e)})),e.length}}]),t}();var L=function(t){return new Promise((function(e){return setTimeout(e,t)}))},q={height:"100vh",width:"100vh",display:"flex",justifyContent:"center",alignItems:"center",flexGrow:0},N=function(t){var e=function(){var t=Object(r.useState)(0),e=Object(l.a)(t,2)[1];return Object(r.useCallback)((function(){return e((function(t){return t+1}))}),[])}(),n=Object(r.useState)(5),c=Object(l.a)(n,1)[0],a=Object(r.useState)((function(){return new B})),i=Object(l.a)(a,1)[0],u=Object(r.useState)(),b=Object(l.a)(u,2),h=b[0],d=b[1],O=Object(r.useState)(0),y=Object(l.a)(O,2),p=y[0],x=y[1],m=Object(r.useCallback)((function(){return t=c-1,Math.floor(Math.random()*t)+1;var t}),[c]);Object(r.useEffect)((function(){var t;null===(t=i.randomPickEmpty(5))||void 0===t||t.forEach((function(t){return i.add(t,m())})),e()}),[i,m,e]);var k=Object(v.a)(!1),C=Object(l.a)(k,2),E=C[0],w=C[1],M=w.on,F=w.off,P=Object(r.useCallback)(function(){var t=Object(s.a)(o.a.mark((function t(n,r){var c,a,u,s,l,v,j;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=i.findWay(n,r)){t.next=3;break}return t.abrupt("return");case 3:M(),u=n,s=Object(f.a)(a),t.prev=6,s.s();case 8:if((l=s.n()).done){t.next=17;break}return v=l.value,t.next=12,L(50);case 12:i.move(u,v),u=v,e();case 15:t.next=8;break;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(6),s.e(t.t0);case 22:return t.prev=22,s.f(),t.finish(22);case 25:j=i.clearInLine(),null===(c=i.randomPickEmpty(3))||void 0===c||c.forEach((function(t){return i.add(t,m())})),console.log(j),x((function(t){return t+j})),e(),F();case 31:case"end":return t.stop()}}),t,null,[[6,19,22,25]])})));return function(e,n){return t.apply(this,arguments)}}(),[i,m,F,M,e]),I=Object(r.useCallback)((function(t){if(!E)return h?(i.canMove(h,t)&&P(h,t),void d(void 0)):void d(t)}),[h,i,E,P]);return Object(j.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(j.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:Object(j.jsxs)("h1",{children:["\u5f53\u524d\u5206\u6570",p]})}),Object(j.jsx)("div",{style:q,children:Object(j.jsx)(g,{data:i.clone(),onClick:I,activePos:h})})]})};var z=function(){return Object(j.jsx)("div",{className:"App",children:Object(j.jsx)(N,{})})},W=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,32)).then((function(e){var n=e.getCLS,r=e.getFID,c=e.getFCP,a=e.getLCP,i=e.getTTFB;n(t),r(t),c(t),a(t),i(t)}))};i.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(z,{})}),document.getElementById("root")),W()}},[[31,1,2]]]);
//# sourceMappingURL=main.9dc74f5e.chunk.js.map