(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{23:function(t,e,n){},24:function(t,e,n){},28:function(t,e,n){},30:function(t,e,n){},31:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n.n(r),c=n(13),i=n.n(c),u=(n(23),n(24),n(12)),o=n.n(u),f=n(7),s=n(14),l=n(3),v=n(18),j=n(2),b=n.n(j),h=(n(28),n(0)),d=["\ud83d\udc12","\ud83d\udc27","\ud83d\udc36","\ud83e\udd84","\ud83d\udc18","\ud83d\udc28","\ud83d\udc07","\ud83e\udd98","\ud83d\udc3c","\ud83d\udc26"],O=function(t){var e=t.type,n=t.active;if(!e)return Object(h.jsx)(h.Fragment,{});var r=d[e-1];return Object(h.jsx)("span",{className:n?"active":"",children:r})};n(30);var y={},p=function(t){var e=t.sizeX,n=t.sizeY,r=t.children,a=t.onClick;return Object(h.jsx)("div",{className:"matrix",style:y,children:Object(j.range)(n).map((function(t){return Object(h.jsx)("div",{className:"matrix-row",children:Object(j.range)(e).map((function(e){return Object(h.jsx)("div",{className:"matrix-block",onClick:function(){return null===a||void 0===a?void 0:a({x:e,y:t})},children:"function"===typeof r?Object(h.jsx)(r,{x:e,y:t}):r},e)}))},t)}))})},x=function(t){var e=t.data,n=t.onClick,r=t.activePos;return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(p,{sizeX:9,sizeY:9,onClick:n,children:function(t){var n,a,c,i=t.x,u=t.y,o=null===(n=e[u])||void 0===n?void 0:n[i],f=!!r&&(c=r,(a=t).x===c.x&&a.y===c.y);return Object(h.jsx)(O,{type:o,active:f})}})})},m=n(15),g=n(16),k=n(17),C=n(4),M=function(t){var e={};return function(n){return n in e?e[n]:e[n]=t(n)}},E=function(t,e){var n=M((function(r){return 0===r?t:(a=[].concat(Object(C.a)(n(r-1).map(e).reduce((function(t,e){return[].concat(Object(C.a)(t),Object(C.a)(e))}),[])),Object(C.a)(n(r-1))),b.a.uniqWith(a,b.a.isEqual));var a}));return n};function w(t){return Math.floor(Math.random()*t)}function F(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t.length;if(!(n<e)){for(var r=[],a=Object(C.a)(t),c=0;c<e;c++){var i=w(a.length),u=a.splice(i,1);r.push.apply(r,Object(C.a)(u))}return r}}function P(t){var e=[];for(var n in t){var r=t[n];for(var a in r){0===r[a]&&e.push({x:+a,y:+n})}}return e}function S(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=P(t);return F(n,e)}var I=function(){var t=Object(j.range)(9).map((function(t){return Object(j.range)(9).map((function(e){return{x:t,y:e}}))})),e=Object(j.range)(9).map((function(t){return Object(j.range)(9).map((function(e){return{x:e,y:t}}))})),n=Object(j.range)(9).map((function(t){return Object(j.range)(9).map((function(e){return{x:e,y:t+e-4}})).filter((function(t){var e=t.y;return e>=0&&e<9}))})),r=Object(j.range)(9).map((function(t){return Object(j.range)(9).map((function(e){return{x:e,y:t-e+4}})).filter((function(t){var e=t.y;return e>=0&&e<9}))}));return console.log(r),[].concat(Object(C.a)(t),Object(C.a)(e),Object(C.a)(n),Object(C.a)(r))}(),B=function(){function t(){var e=this;Object(g.a)(this,t),this.data=void 0,this.nearBy=function(t){var e=t.x,n=t.y;return[{x:e+1,y:n},{x:e-1,y:n},{x:e,y:n+1},{x:e,y:n-1}]},this.nearByCanGo=function(t){return e.nearBy(t).filter((function(t){return 0===e.get(t)}))},this.data=Object(j.range)(9).map((function(){return Object(j.range)(9).fill(0)}))}return Object(k.a)(t,[{key:"get",value:function(t){var e=t.x,n=t.y;return(this.data[n]||[])[e]}},{key:"set",value:function(t,e){var n=t.x,r=t.y;this.data[r][n]=e}},{key:"remove",value:function(t){this.set(t,0)}},{key:"clone",value:function(){return Object(j.cloneDeep)(this.data)}},{key:"randomPickEmpty",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return S(this.data,t)}},{key:"add",value:function(t,e){return 0===this.get(t)&&(this.set(t,e),!0)}},{key:"show",value:function(){return this.data.map((function(t){return t.join(",")})).join("\n")}},{key:"forceMove",value:function(t,e){var n=this.get(t);this.set(t,0),this.set(e,n)}},{key:"move",value:function(t,e){this.forceMove(t,e)}},{key:"canMove",value:function(t,e){return this.get(t)&&!this.get(e)&&this.findWay(t,e)}},{key:"findWay",value:function(t,e){var n=this;return function(t,e,n){for(var r=E([t],n),a=1;;){if(r(a).length===r(a-1).length)return;if(r(a).some((function(t){return Object(j.isEqual)(t,e)})))break;a++}var c=M((function(t){if(t===a)return e;var i=c(t+1);return r(t).reverse().find((function(t){return n(t).some((function(t){return Object(j.isEqual)(t,i)}))}))}));return Object(j.range)(a+1).map(c)}(t,e,(function(t){return[t].concat(Object(C.a)(n.nearByCanGo(t)))}))}},{key:"getFiveInLine",value:function(t){if(t.length<5)return[];var e,n=Object(m.a)(t),r=n[0],a=n.slice(1),c=[r],i=Object(f.a)(a);try{for(i.s();!(e=i.n()).done;){var u=e.value,o=c[c.length-1];if(this.get(o)!==this.get(u)){if(c.length>=5)return c;c.length=0}c.push(u)}}catch(s){i.e(s)}finally{i.f()}return c.length>=5?c:[]}},{key:"clearInLine",value:function(){var t=this,e=b()(I).flatMap((function(e){return t.getFiveInLine(e)})).uniq().value().filter((function(e){return t.get(e)}));return e.forEach((function(e){return t.remove(e)})),e.length}}]),t}();var L=function(t){return new Promise((function(e){return setTimeout(e,t)}))},q={height:"100vh",width:"100vh",display:"flex",justifyContent:"center",alignItems:"center",flexGrow:0},z=function(t){var e=function(){var t=Object(r.useState)(0),e=Object(l.a)(t,2)[1];return Object(r.useCallback)((function(){return e((function(t){return t+1}))}),[])}(),n=Object(r.useState)((function(){return new B})),a=Object(l.a)(n,1)[0],c=Object(r.useState)(),i=Object(l.a)(c,2),u=i[0],b=i[1],d=Object(r.useState)(0),y=Object(l.a)(d,2),p=y[0],m=y[1],g=Object(r.useState)(),k=Object(l.a)(g,2),C=k[0],M=k[1],E=Object(r.useCallback)((function(){var t,e=Math.min(Math.floor(Math.max(p-500,0)/500+5),9);return t=e-1,Math.floor(Math.random()*t)+1}),[p]),w=Object(r.useCallback)((function(){var t;null===(t=a.randomPickEmpty(3))||void 0===t||t.forEach((function(t,e){return a.add(t,C?C[e]:E())})),M(Object(j.range)(3).map(E))}),[a,C,E]);Object(r.useEffect)((function(){var t;null===(t=a.randomPickEmpty(2))||void 0===t||t.forEach((function(t){return a.add(t,E())})),w(),e()}),[a]);var F=Object(v.a)(!1),P=Object(l.a)(F,2),S=P[0],I=P[1],z=I.on,N=I.off,W=Object(r.useCallback)(function(){var t=Object(s.a)(o.a.mark((function t(n,r){var c,i,u,s,l,v;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=a.findWay(n,r)){t.next=3;break}return t.abrupt("return");case 3:z(),i=n,u=Object(f.a)(c),t.prev=6,u.s();case 8:if((s=u.n()).done){t.next=17;break}return l=s.value,t.next=12,L(50);case 12:a.move(i,l),i=l,e();case 15:t.next=8;break;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(6),u.e(t.t0);case 22:return t.prev=22,u.f(),t.finish(22);case 25:(v=a.clearInLine())||w(),console.log(v),m((function(t){return t+v})),e(),N();case 31:case"end":return t.stop()}}),t,null,[[6,19,22,25]])})));return function(e,n){return t.apply(this,arguments)}}(),[a,z,e,N,w]),D=Object(r.useCallback)((function(t){if(!S)return u?(a.canMove(u,t)&&W(u,t),void b(void 0)):void b(t)}),[u,a,S,W]);return Object(h.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(h.jsxs)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:[Object(h.jsxs)("h1",{children:["\u5f53\u524d\u5206\u6570",p]}),Object(h.jsx)("div",{style:{fontSize:"7vh"},children:null===C||void 0===C?void 0:C.map((function(t,e){return Object(h.jsx)(O,{type:t},e)}))})]}),Object(h.jsx)("div",{style:q,children:Object(h.jsx)(x,{data:a.clone(),onClick:D,activePos:u})})]})};var N=function(){return Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(z,{})})},W=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,32)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),r(t),a(t),c(t),i(t)}))};i.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(N,{})}),document.getElementById("root")),W()}},[[31,1,2]]]);
//# sourceMappingURL=main.fd6beef2.chunk.js.map